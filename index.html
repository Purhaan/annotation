<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>ğŸ”¬ Binary Mask Annotator</title>
  <style>
    body{margin:0;font-family:Segoe UI;background:#f2f2f2}
    #wrapper{display:flex;height:100vh}
    #sidebar{background:#fff;width:280px;padding:20px;box-shadow:2px 0 5px rgba(0,0,0,.1)}
    #canvasArea{flex:1;display:flex;align-items:center;justify-content:center;background:#333}
    canvas{border:1px solid #555;cursor:crosshair;background:#000}
    /* â¬‡ï¸  makes the canvas fill the preview area */
    #canvasArea canvas{width:100vw !important;height:100vh !important;object-fit:contain}
    button{width:100%;padding:12px;margin:8px 0;border:none;border-radius:4px;font-size:16px;cursor:pointer}
    .black{background:#000;color:#fff}
    .white{background:#fff;color:#000;border:1px solid #000}
    .active{outline:3px solid #4caf50}
    input[type=range]{width:100%}
  </style>
</head>
<body>
<div id="wrapper">
  <div id="sidebar">
    <input type="file" id="uploader" accept="image/*" style="display:none">
    <button onclick="document.getElementById('uploader').click()">ğŸ“¤ Upload Image</button>
    <button id="btnBlack" class="black active" onclick="setColor('#000000',this)">Black</button>
    <button id="btnWhite" class="white" onclick="setColor('#FFFFFF',this)">White</button>
    <label>Brush Size <input type="range" id="brushSize" min="1" max="50" value="10"></label>
    <button onclick="clearMask()">ğŸ—‘ï¸ Clear</button>
    <button onclick="downloadMask()">ğŸ’¾ Save PNG</button>
  </div>
  <div id="canvasArea"><canvas id="cvs"></canvas></div>
</div>
<script>
const c=document.getElementById('cvs'),x=c.getContext('2d');x.imageSmoothingEnabled=false;
let img=new Image(),color='#000000',brush=10,d=false;
document.getElementById('uploader').addEventListener('change',e=>{
  const f=e.target.files[0];if(!f)return;
  img.onload=()=>{c.width=img.width;c.height=img.height;x.fillStyle='#000';x.fillRect(0,0,c.width,c.height);x.drawImage(img,0,0)};
  img.src=URL.createObjectURL(f);
});
function setColor(c,b){color=c;[...document.querySelectorAll('#sidebar button')].forEach(b=>b.classList.remove('active'));b.classList.add('active')}
document.getElementById('brushSize').addEventListener('input',e=>brush=+e.target.value);
c.addEventListener('mousedown',e=>{d=true;draw(e)});
c.addEventListener('mousemove',draw);
c.addEventListener('mouseup',()=>d=false);
function draw(e){if(!d)return;const r=c.getBoundingClientRect(),X=(e.clientX-r.left)*(c.width/r.width),Y=(e.clientY-r.top)*(c.height/r.height);x.globalCompositeOperation='source-over';x.fillStyle=color;x.beginPath();x.arc(X,Y,brush,0,2*Math.PI);x.fill()}
function clearMask(){x.fillStyle='#000';x.fillRect(0,0,c.width,c.height)}
function downloadMask(){const a=document.createElement('a');a.download='binary_mask.png';a.href=c.toDataURL('image/png');a.click()}
</script>
</body>
</html>
